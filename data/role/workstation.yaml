---
classes:
  - docker
  - profile::hypervisor_kvm

packages:
  - --emacs-nox
  - emacs
  - fonts-hack
  - gh
  - pdk

concat_fragments:
  # These files are modified on installation for some reason. Doesn't matter.
  vscode .desktop files:
    target: /etc/debsums-ignore
    content: |
      ^/usr/share/applications/code\.desktop$
      ^/usr/share/applications/code-url-handler\.desktop$

sysctls:
  # Docker sets this to 1 for some dumb reason. It needs to be 2
  # because forwarding is enabled and I want RA on br0 configure the
  # default route. Before Docker, ifupdown//etc/network/interfaces was
  # setting this to 2.
  net.ipv6.conf.br0.accept_ra:
    ensure: present
    value: 2
    target: /etc/sysctl.d/local.conf
